# Self-Evolving Service Prototype

A Node.js MVP that automatically detects and patches runtime errors in an Express.js service by analyzing logs and applying code fixes powered by **OpenRouter AI** free API.

## 🔧 Project function

- The service watches `app.log` for new `TypeError` entries.
- On error detection, it triggers a **surgical patcher** that:
  - Locates the faulty function.
  - Applies a contextual fix (e.g., adding input validation).
  - Updates the source code automatically.
- The service uses a pointer mechanism to avoid reprocessing old logs.

## 📁 Project Structure

```
.
├── index.js            # Express server app
├── watcher.js          # Watches for log updates and triggers patching
├── patcher.js          # Applies surgical code fixes
├── app.log             # Runtime log file (autogenerated)
├── app.log.pointer     # Tracks read position in the log (autogenerated)
├── run.js              # Starts the log watcher and server
├── package.json
└── README.md
```

## 🚀 Getting Started

### 1. Clone the project and install dependencies

```bash
npm install
```

### 2. Create a .env file and insert the following env variables

```bash
PORT=3000
OPENROUTER_API_URL='https://openrouter.ai/api/v1/chat/completions'
OPENROUTER_API_KEY='xx-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' //OpenRouter AI token HERE
MODEL='openai/gpt-3.5-turbo' //This is an example model, other models can be used
```

### 3. Start the service

```bash
npm start
```

Or, for development with auto-reloading:

```bash
npm run dev
```

### 4. Test the self-healing system

Send an invalid request (e.g., missing `data` field) to the `/parse` endpoint:

```bash
curl -X POST http://localhost:3000/parse -H "Content-Type: application/json" -d '{}'
```

- This will trigger a `TypeError`.
- The error gets logged to `app.log`.
- The watcher detects it and applies a fix automatically.

## 🧠 Tech Stack

- **Node.js**
- **Express.js**
- **fs.watchFile** for log monitoring
- Simple patching logic via regex and function context extraction

## 📌 Notes

- Only `TypeError` detection is supported in the current MVP.
- Patch logic is centralized in `patcher.js` and can be extended.
- This project is designed for experimentation and future evolution into a robust self-healing system.

## 📜 License

MIT

---

Project created as a protoype of autonomus patching agents.
