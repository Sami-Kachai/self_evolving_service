# Self-Evolving Service Prototype

A Node.js MVP that automatically detects and patches runtime errors in an Express.js service by analyzing logs and applying code fixes powered by **OpenRouter AI** free API.

## ğŸ”§ Project function

- The service watches `app.log` for new `TypeError` entries.
- On error detection, it triggers a **surgical patcher** that:
  - Locates the faulty function.
  - Applies a contextual fix (e.g., adding input validation).
  - Updates the source code automatically.
- The service uses a pointer mechanism to avoid reprocessing old logs.

## ğŸ“ Project Structure

```
.
â”œâ”€â”€ index.js            # Express server app
â”œâ”€â”€ watcher.js          # Watches for log updates and triggers patching
â”œâ”€â”€ patcher.js          # Applies surgical code fixes
â”œâ”€â”€ app.log             # Runtime log file (autogenerated)
â”œâ”€â”€ app.log.pointer     # Tracks read position in the log (autogenerated)
â”œâ”€â”€ run.js              # Starts the log watcher and server
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

## ğŸš€ Getting Started

### 1. Clone the project and install dependencies

```bash
npm install
```

### 2. Create a .env file and insert the following env variables

```bash
PORT=3000
OPENROUTER_API_URL='https://openrouter.ai/api/v1/chat/completions'
OPENROUTER_API_KEY='xx-or-v1-xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx' //OpenRouter AI token HERE
MODEL='openai/gpt-3.5-turbo' //This is an example model, other models can be used
```

### 3. Start the service

```bash
npm start
```

Or, for development with auto-reloading:

```bash
npm run dev
```

### 4. Test the self-healing system

Send an invalid request (e.g., missing `data` field) to the `/parse` endpoint:

```bash
curl -X POST http://localhost:3000/parse -H "Content-Type: application/json" -d '{}'
```

- This will trigger a `TypeError`.
- The error gets logged to `app.log`.
- The watcher detects it and applies a fix automatically.

## ğŸ§  Tech Stack

- **Node.js**
- **Express.js**
- **fs.watchFile** for log monitoring
- Simple patching logic via regex and function context extraction

## ğŸ“Œ Notes

- Only `TypeError` detection is supported in the current MVP.
- Patch logic is centralized in `patcher.js` and can be extended.
- This project is designed for experimentation and future evolution into a robust self-healing system.

## ğŸ“œ License

MIT

---

Project created as a protoype of autonomus patching agents.
